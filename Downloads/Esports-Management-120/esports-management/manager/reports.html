<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reports</title>
    <link rel="stylesheet" href="../css_manager/reports.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="report-container">
        <h1>Reports</h1>
        <div class="report-controls">
            <select id="reportType">
                <option value="">Select Report Type</option>
                <option value="tournament">Tournament Report</option>
                <option value="team">Team Report</option>
                <option value="player">Player Report</option>
                <option value="match">Match Report</option>
            </select>
            <button onclick="generateReport()">Generate Report</button>
            <a href="../manager_dashboard.html" class="back-button">‚Üê Back to Dashboard</a>
        </div>

        <div id="reportResults"></div>
        <canvas id="performanceChart" style="display: none;"></canvas>
    </div>

    <script>
    // Sample data for demonstration
    const teamId = 1; // Static placeholder, since PHP session is gone
    const data = {
        tournaments: [
            {id:1, name:"Champions Cup", start:"2025-01-10", end:"2025-01-20", prize:"$5000", status:"Ongoing"},
            {id:2, name:"Winter Tournament", start:"2025-02-05", end:"2025-02-15", prize:"$3000", status:"Completed"}
        ],
        team: [
            {id:1, name:"Alpha Warriors", manager:101, creation:"2024-06-01"}
        ],
        players: [
            {id:1, username:"JohnDoe", role:"Striker", join:"2024-07-15", avg:4.5, win_rate:75},
            {id:2, username:"JaneSmith", role:"Defender", join:"2024-07-20", avg:4.2, win_rate:80}
        ],
        matches: [
            {id:1, tournament:1, team1:"Alpha Warriors", team2:"Beta Knights", date:"2025-01-12", result:"2-1"},
            {id:2, tournament:2, team1:"Alpha Warriors", team2:"Gamma Titans", date:"2025-02-06", result:"1-3"}
        ]
    };

    function generateReport() {
        const type = document.getElementById('reportType').value;
        let html = "<table>";

        if(type === "tournament") {
            html += "<tr><th>ID</th><th>Name</th><th>Start Date</th><th>End Date</th><th>Prize Pool</th><th>Status</th></tr>";
            data.tournaments.forEach(t => {
                html += `<tr>
                            <td>${t.id}</td>
                            <td>${t.name}</td>
                            <td>${t.start}</td>
                            <td>${t.end}</td>
                            <td>${t.prize}</td>
                            <td>${t.status}</td>
                         </tr>`;
            });
        } else if(type === "team") {
            html += "<tr><th>Team ID</th><th>Name</th><th>Manager ID</th><th>Creation Date</th></tr>";
            data.team.forEach(t => {
                html += `<tr>
                            <td>${t.id}</td>
                            <td>${t.name}</td>
                            <td>${t.manager}</td>
                            <td>${t.creation}</td>
                         </tr>`;
            });
        } else if(type === "player") {
            html += "<tr><th>ID</th><th>Username</th><th>Role</th><th>Join Date</th><th>Avg Rating</th><th>Win Rate (%)</th></tr>";
            data.players.forEach(p => {
                html += `<tr>
                            <td>${p.id}</td>
                            <td>${p.username}</td>
                            <td>${p.role}</td>
                            <td>${p.join}</td>
                            <td>${p.avg}</td>
                            <td>${p.win_rate}</td>
                         </tr>`;
            });
        } else if(type === "match") {
            html += "<tr><th>ID</th><th>Tournament ID</th><th>Team 1</th><th>Team 2</th><th>Match Date</th><th>Result</th></tr>";
            data.matches.forEach(m => {
                html += `<tr>
                            <td>${m.id}</td>
                            <td>${m.tournament}</td>
                            <td>${m.team1}</td>
                            <td>${m.team2}</td>
                            <td>${m.date}</td>
                            <td>${m.result}</td>
                         </tr>`;
            });
        }

        html += "</table>";
        document.getElementById('reportResults').innerHTML = html;
        document.getElementById('performanceChart').style.display = 'none'; // placeholder
    }
    </script>

</body>
</html>
